# TinderForPoor
Добрый день, меня зовут [Ярошенко Даниил](https://spb.hh.ru/resume/4cfc6325ff096cd3ad0039ed1f5a4a51476e49)    
Буду благодарен за конструктивный фидбэк    

https://salty-stream-30778.herokuapp.com/admin/login/?next=/admin/     
учетная запись для админа вы можете запросить в лс, контакты есть в резюме

## 1.Создать модель участников. У участника должна быть аватарка, пол, имя и фамилия, почта.   
Наследовал от AbstractBaseUser   

## 2.Создать эндпоинт регистрации нового участника: /api/clients/create (не забываем о пароле и совместимости с авторизацией модели участника).    
Адрес https://salty-stream-30778.herokuapp.com/api/clients/create  
Авторизация по почте, также есть валидация введеных данных на корректность и на пустоту    
Принимает Post запрос   
Поля:   
email = models.EmailField(max_length=100, unique=True)    
first_name = models.CharField(max_length=30)    
last_name = models.CharField(max_length=30)    
sex = models.CharField с выборами, доступные значения Male/Female    
password models.CharField Поле для пароля    
password2 models.CharField Поле для повторного ввода пароля (чтобы избежать ошибки при вводе)    
avatar = models.ImageField Поле для аватарки    

## 3. При регистрации нового участника необходимо обработать его аватарку: наложить на него водяной знак (в качестве водяного знака можете взять любую картинку).   
Основной алгоритм в файле Watermark.py   
Накладывается при сохранении модели   
Наложение можно проверить самостоятельно, создав пользователя с выбранным изображением, затем с помощью [api/list](https://salty-stream-30778.herokuapp.com/api/clients/list)     
получить информацию по новому пользователю и адресу его аватарки. [Например](https://mybucketfortesttasktinder.s3.amazonaws.com/images/user_da11334%40mail.ru_images/user_da11334mail.ru_IGM.jpg)

## 4. Создать эндпоинт оценивания участником другого участника: /api/clients/{id}/match.    В случае, если возникает взаимная симпатия, то ответом выдаем почту клиенту и отправляем на почты участников: «Вы понравились <имя>! Почта участника: <почта>».    
https://salty-stream-30778.herokuapp.com/api/clients/id/match/    
Где id необходимо заменить, на номер понравившегося пользователя (номер пользователя можно узнать в [api/list](https://salty-stream-30778.herokuapp.com/api/clients/list)     
Список пользователей хранится в модели пользователя в liked_list = models.JSONField(blank=True, default=list)    
Принимает запрос PUT    
Метод работает только для авторизованного пользователя.   
Если вас нет в списке лайкнутого пользователя, то его номер просто добавится в ваш список.   
Если есть, то отправится письмо на почту.    
Отправка писем обычная:
from django.core.mail import send_mail    
'django.core.mail.backends.smtp.EmailBackend'    

## 5. Создать эндпоинт списка участников: /api/list. Должна быть возможность фильтрации списка по полу, имени, фамилии.   Советую использовать библиотеку Django-filters.   
принимает GET запрос   
Список пользователей   
https://salty-stream-30778.herokuapp.com/api/clients/list    
Пример списка пользователей с фильтрами    
https://salty-stream-30778.herokuapp.com/api/clients/list?sex=F&distance=100&first_name=Ivan&last_name=Ivanov    
Доступные значения:    
sex=(F,M) Фильтр по полу - Female, Male    
distance=<число> фильтр для расстояния в пределах заданной дистанции. Запросит аутентификацию, если включен в гет запрос, запросит аутентификацию, так как    
от анонимного пользователя не сможет вычислить расстояние.    
first_name=<Имя>    
last_name=<Фамилия>    

## 6. Реализовать определение дистанции между участниками. Добавить поля долготы и широты.    В api списка добавить дополнительный фильтр, который показывает участников в пределах заданной дистанции относительно авторизованного пользователя.    Не забывайте об оптимизации запросов к базе данных   
Поля добавлены, про фильтр выше. Расстояние вычисляется с помощью библиотеки geopy    
from geopy.distance import great_circle    
При регистрации поля долготы и широты инициализируются случайными значениями для более удобной проверки    
 
## 7.Задеплоить проект на любом удобном для вас хостинге, сервисах PaaS (Heroku) и т.п. Должна быть возможность просмотреть реализацию всех задач.     Если есть какие-то особенности по тестированию, написать в Readme. Там же оставить ссылку/ссылки на АПИ проекта    
Ссылки и некоторая справочная информация были выше    
https://salty-stream-30778.herokuapp.com/   



